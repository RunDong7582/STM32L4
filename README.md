mostly based on STM32L476